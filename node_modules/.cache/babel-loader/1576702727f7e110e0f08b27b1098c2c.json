{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\darke\\\\vezdecode-andreev\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useMemo,useState}from'react';import{withRouter,Link}from'react-router-dom';import accounting from'accounting';import Checkbox from'./Checkbox';import edit from\"../img/edit.svg\";import'./place.css';var Basket=function Basket(_ref){var _ref$match$params=_ref.match.params,areaId=_ref$match$params.areaId,itemId=_ref$match$params.itemId,foodAreas=_ref.foodAreas,order=_ref.order;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),faster=_useState2[0],setFaster=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),selfService=_useState6[0],setSelfService=_useState6[1];var area=foodAreas.filter(function(area){return area.id===areaId;})[0];var item=area.items.filter(function(item){return item.id===itemId;})[0];var _useMemo=useMemo(function(){var order_type=localStorage.getItem('order-type');var order_time=localStorage.getItem('order-time');if(!order_type){setSelfService(false);}else{setSelfService(true);}if(order_time!==''){setFaster(false);setTime(order_time);}else{setFaster(true);setTime('');}var foodIds=new Set((item.foods||[]).map(function(item){return item.id;}));var products=Object.values(order).filter(function(value){var id=value.item.id;return foodIds.has(id);});var result=products.reduce(function(result,value){var count=value.count,item=value.item;return result+parseInt(item.price)*parseInt(count);},0);return[accounting.formatNumber(result,0,' '),products];},[order,item]),_useMemo2=_slicedToArray(_useMemo,2),price=_useMemo2[0],products=_useMemo2[1];if(time===''&&faster===false){return/*#__PURE__*/React.createElement(\"div\",{className:\"Place\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Place__header\"},/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__trz\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"Place__head\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"Place__logo\"},area.name)),/*#__PURE__*/React.createElement(Link,{to:\"/edit\",className:\"Place__change-tz\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"change-profile\",src:edit})))),/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__restoraunt\"},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__restoraunt-logo\",alt:\"Fastfood logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h2\",{className:\"Place__restoraunt-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__restoraunt-type\"},item.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__products-wrapper\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"Place__products\"},products.map(function(_ref2){var item=_ref2.item,count=_ref2.count;return/*#__PURE__*/React.createElement(\"li\",{className:\"Place__product\",key:item.id},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__product-logo\",alt:\"Ordered product logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h3\",{className:\"Place__product-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-price\"},\"\\u0426\\u0435\\u043D\\u0430: \",item.price),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-count\"},\"x\",count));})),/*#__PURE__*/React.createElement(Link,{className:\"Place__change-product\",to:\"/place/\".concat(areaId,\"/\").concat(itemId),onFocus:function onFocus(){localStorage.setItem('order-type',selfService);localStorage.setItem('order-time',time);}},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041A\\u0430\\u043A \\u043C\\u043E\\u0436\\u043D\\u043E \\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{id:\"id-fast\",checked:faster,onToggle:function onToggle(){if(!faster){setTime('');setFaster(true);}}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item-time\"},/*#__PURE__*/React.createElement(\"div\",{className:\"Time__div_style\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"Time__style\"},/*#__PURE__*/React.createElement(\"input\",{type:\"time\",value:time,name:\"selected_time\",list:\"time-list\",onFocus:function onFocus(){setFaster(false);},onChange:function onChange(event){setFaster(false);setTime(event.target.value);}}))),/*#__PURE__*/React.createElement(\"datalist\",{id:\"time-list\"},/*#__PURE__*/React.createElement(\"option\",{value:\"10:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"11:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"12:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"13:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"14:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"15:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"16:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"17:00\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0421 \\u0441\\u043E\\u0431\\u043E\\u0439\"),/*#__PURE__*/React.createElement(Checkbox,{checked:selfService,onToggle:function onToggle(){return setSelfService(!selfService);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{checked:!selfService,onToggle:function onToggle(){return setSelfService(!setSelfService);}}))),/*#__PURE__*/React.createElement(\"footer\",{className:\"Place__footer\"},/*#__PURE__*/React.createElement(\"input\",{type:\"button\",value:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0432\\u0440\\u0435\\u043C\\u044F \\u043F\\u043E\\u043B\\u0443\\u0447\\u0435\\u043D\\u0438\\u044F \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\",className:\"Place__order__disabled\",disabled:\"disabled\"})));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"Place\"},/*#__PURE__*/React.createElement(\"header\",{className:\"Place__header\"},/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__trz\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"Place__head\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"Place__logo\"},area.name)),/*#__PURE__*/React.createElement(Link,{to:\"/edit\",className:\"Place__change-tz\"},/*#__PURE__*/React.createElement(\"img\",{alt:\"change-profile\",src:edit})))),/*#__PURE__*/React.createElement(\"aside\",{className:\"Place__restoraunt\"},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__restoraunt-logo\",alt:\"Fastfood logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h2\",{className:\"Place__restoraunt-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__restoraunt-type\"},item.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__products-wrapper\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"Place__products\"},products.map(function(_ref3){var item=_ref3.item,count=_ref3.count;return/*#__PURE__*/React.createElement(\"li\",{className:\"Place__product\",key:item.id},/*#__PURE__*/React.createElement(\"img\",{className:\"Place__product-logo\",alt:\"Ordered product logo\",src:item.image}),/*#__PURE__*/React.createElement(\"h3\",{className:\"Place__product-name\"},item.name),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-price\"},\"\\u0426\\u0435\\u043D\\u0430: \",item.price),/*#__PURE__*/React.createElement(\"p\",{className:\"Place__product-count\"},\"x\",count));})),/*#__PURE__*/React.createElement(Link,{className:\"Place__change-product\",to:\"/place/\".concat(areaId,\"/\").concat(itemId),onFocus:function onFocus(){localStorage.setItem('order-type',selfService);localStorage.setItem('order-time',time);}},\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041A\\u0430\\u043A \\u043C\\u043E\\u0436\\u043D\\u043E \\u0431\\u044B\\u0441\\u0442\\u0440\\u0435\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{id:\"id-fast\",checked:faster,onToggle:function onToggle(){if(!faster){setTime('');setFaster(true);}}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item-time\"},/*#__PURE__*/React.createElement(\"div\",{className:\"Time__div_style\"},/*#__PURE__*/React.createElement(\"span\",null,\"\\u041D\\u0430\\u0437\\u043D\\u0430\\u0447\\u0438\\u0442\\u044C:\"),/*#__PURE__*/React.createElement(\"p\",{className:\"Time__style\"},/*#__PURE__*/React.createElement(\"input\",{type:\"time\",value:time,name:\"selected_time\",list:\"time-list\",onFocus:function onFocus(){setFaster(false);},onChange:function onChange(event){setFaster(false);setTime(event.target.value);}}))),/*#__PURE__*/React.createElement(\"datalist\",{id:\"time-list\"},/*#__PURE__*/React.createElement(\"option\",{value:\"10:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"11:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"12:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"13:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"14:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"15:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"16:00\"}),/*#__PURE__*/React.createElement(\"option\",{value:\"17:00\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u0421 \\u0441\\u043E\\u0431\\u043E\\u0439\"),/*#__PURE__*/React.createElement(Checkbox,{checked:selfService,onToggle:function onToggle(){return setSelfService(selfService);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"Place__choice-item\"},/*#__PURE__*/React.createElement(\"h3\",null,\"\\u041D\\u0430 \\u043C\\u0435\\u0441\\u0442\\u0435\"),/*#__PURE__*/React.createElement(Checkbox,{checked:!selfService,onToggle:function onToggle(){return setSelfService(!setSelfService);}}))),/*#__PURE__*/React.createElement(\"footer\",{className:\"Place__footer\"},/*#__PURE__*/React.createElement(Link,{to:\"/order/\".concat(area.id,\"/\").concat(item.id),className:\"Place__order\"},\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C \",price)));}};export default withRouter(Basket);","map":{"version":3,"sources":["C:/Users/darke/vezdecode-andreev/src/panels/Basket.js"],"names":["React","useMemo","useState","withRouter","Link","accounting","Checkbox","Basket","match","params","areaId","itemId","foodAreas","order","faster","setFaster","time","setTime","selfService","setSelfService","area","filter","id","item","items","order_type","localStorage","getItem","order_time","foodIds","Set","foods","map","products","Object","values","value","has","result","reduce","count","parseInt","price","formatNumber","name","edit","image","description","setItem","event","target"],"mappings":"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","sourcesContent":["import React, { useMemo, useState } from 'react';\nimport { withRouter, Link } from 'react-router-dom';\nimport accounting from 'accounting';\n\nimport Checkbox from './Checkbox';\n\nimport edit from '../img/edit.svg';\nimport './place.css';\n\n\nconst Basket = ({ match: { params: { areaId, itemId }}, foodAreas, order }) => {\n  const [ faster, setFaster ] = useState(true);\n  const [ time, setTime ] = useState('');\n  const [ selfService, setSelfService ] = useState(false);\n  const area = foodAreas.filter(area => area.id === areaId)[0];\n  const item = area.items.filter(item => item.id === itemId)[0];\n\n  const [ price, products ] = useMemo(() => {\n  const order_type = localStorage.getItem('order-type');\n  const order_time = localStorage.getItem('order-time');\n  if(!order_type){\n    setSelfService(false);\n  } else {\n    setSelfService(true);\n  }\n\n  if(order_time !== '' ){\n    setFaster(false);\n    setTime(order_time);\n  } else {\n    setFaster(true);\n    setTime('');\n  }\n\n    const foodIds = new Set((item.foods || []).map(item => item.id));\n\n    const products = Object.values(order)\n      .filter((value) => {\n        const { item: { id }} = value;\n\n        return foodIds.has(id);\n      });\n\n    const result = products.reduce((result, value) => {\n        const { count, item } = value;\n\n        return result + parseInt(item.price) * parseInt(count);\n      }, 0);\n\n    return [ accounting.formatNumber(result, 0, ' '), products ];\n  }, [ order, item ]);\n\nif(time === '' && faster === false){\nreturn (\n    <div className=\"Place\">\n      <header className=\"Place__header\">\n        <aside className=\"Place__trz\">\n          <h1 className=\"Place__head\">\n            <Link to=\"/\" className=\"Place__logo\">\n              {area.name}\n            </Link>\n          </h1>\n          <Link to=\"/edit\" className=\"Place__change-tz\">\n            <img\n              alt=\"change-profile\"\n              src={edit}\n            />\n          </Link>\n        </aside>\n      </header>\n      <aside className=\"Place__restoraunt\">\n        <img\n          className=\"Place__restoraunt-logo\"\n          alt=\"Fastfood logo\"\n          src={item.image}\n        />\n        <h2 className=\"Place__restoraunt-name\">\n          {item.name}\n        </h2>\n        <p className=\"Place__restoraunt-type\">\n          {item.description}\n        </p>\n      </aside>\n      <div className=\"Place__products-wrapper\">\n        <ul className=\"Place__products\">\n          {products.map(({ item, count }) => (\n            <li\n              className=\"Place__product\"\n              key={item.id}\n            >\n              <img\n                className=\"Place__product-logo\"\n                alt=\"Ordered product logo\"\n                src={item.image}\n              />\n              <h3\n                className=\"Place__product-name\"\n              >\n                {item.name}\n              </h3>\n              <p\n                className=\"Place__product-price\"\n              >\n                Цена: {item.price}\n              </p>\n              <p\n                className=\"Place__product-count\"\n              >\n                x{count}\n              </p>\n            </li>\n          ))}\n        </ul>\n        <Link\n          className=\"Place__change-product\"\n          to={`/place/${areaId}/${itemId}`}\n          onFocus={() => {\n            localStorage.setItem('order-type', selfService);\n            localStorage.setItem('order-time', time);\n          }}\n        >\n          Изменить\n        </Link>\n      </div>\n      <div className=\"Place__choice\">\n        <h3>Получить заказ:</h3>\n        <div className=\"Place__choice-item\">\n          <span>Как можно быстрее</span>\n          <Checkbox id=\"id-fast\"\n            checked={faster} \n            onToggle={() => {\n              if (!faster) {\n                setTime('');\n                setFaster(true);\n              }\n            }}\n          />\n        </div>\n        <div className=\"Place__choice-item-time\">\n        <div className=\"Time__div_style\">\n          <span>Назначить:</span>\n          <p className=\"Time__style\">\n          <input type=\"time\" value={time} name=\"selected_time\" list=\"time-list\"\n           onFocus={() => {\n            setFaster(false);\n          }}\n           onChange={event => {\n              setFaster(false);\n              setTime(event.target.value);\n            }}/>\n          </p>\n          </div>\n          <datalist id=\"time-list\">\n          <option value=\"10:00\"></option>\n          <option value=\"11:00\"></option>\n          <option value=\"12:00\"></option>\n          <option value=\"13:00\"></option>\n          <option value=\"14:00\"></option>\n          <option value=\"15:00\"></option>\n          <option value=\"16:00\"></option>\n          <option value=\"17:00\"></option>\n          </datalist>\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>С собой</h3>\n          <Checkbox checked={selfService} onToggle={() => setSelfService(!selfService)} />\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>На месте</h3>\n          <Checkbox checked={!selfService} onToggle={() => setSelfService(!setSelfService)} />\n        </div>\n      </div>\n      <footer className=\"Place__footer\">\n        <input type=\"button\" value=\"Укажите время получения заказа\" className=\"Place__order__disabled\" disabled=\"disabled\" />\n      </footer>\n    </div>\n    );\n} else {\nreturn (\n    <div className=\"Place\">\n      <header className=\"Place__header\">\n        <aside className=\"Place__trz\">\n          <h1 className=\"Place__head\">\n            <Link to=\"/\" className=\"Place__logo\">\n              {area.name}\n            </Link>\n          </h1>\n          <Link to=\"/edit\" className=\"Place__change-tz\">\n            <img\n              alt=\"change-profile\"\n              src={edit}\n            />\n          </Link>\n        </aside>\n      </header>\n      <aside className=\"Place__restoraunt\">\n        <img\n          className=\"Place__restoraunt-logo\"\n          alt=\"Fastfood logo\"\n          src={item.image}\n        />\n        <h2 className=\"Place__restoraunt-name\">\n          {item.name}\n        </h2>\n        <p className=\"Place__restoraunt-type\">\n          {item.description}\n        </p>\n      </aside>\n      <div className=\"Place__products-wrapper\">\n        <ul className=\"Place__products\">\n          {products.map(({ item, count }) => (\n            <li\n              className=\"Place__product\"\n              key={item.id}\n            >\n              <img\n                className=\"Place__product-logo\"\n                alt=\"Ordered product logo\"\n                src={item.image}\n              />\n              <h3\n                className=\"Place__product-name\"\n              >\n                {item.name}\n              </h3>\n              <p\n                className=\"Place__product-price\"\n              >\n                Цена: {item.price}\n              </p>\n              <p\n                className=\"Place__product-count\"\n              >\n                x{count}\n              </p>\n            </li>\n          ))}\n        </ul>\n        <Link\n          className=\"Place__change-product\"\n          to={`/place/${areaId}/${itemId}`}\n          onFocus={() => {\n            localStorage.setItem('order-type', selfService);\n            localStorage.setItem('order-time', time);\n          }}\n        >\n          Изменить\n        </Link>\n      </div>\n      <div className=\"Place__choice\">\n        <h3>Получить заказ:</h3>\n        <div className=\"Place__choice-item\">\n          <span>Как можно быстрее</span>\n          <Checkbox id=\"id-fast\"\n            checked={faster} \n            onToggle={() => {\n              if (!faster) {\n                setTime('');\n                setFaster(true);\n              }\n            }}\n          />\n        </div>\n        <div className=\"Place__choice-item-time\">\n        <div className=\"Time__div_style\">\n          <span>Назначить:</span>\n          <p className=\"Time__style\">\n          <input type=\"time\" value={time} name=\"selected_time\" list=\"time-list\"\n           onFocus={() => {\n            setFaster(false);\n          }}\n           onChange={event => {\n              setFaster(false);\n              setTime(event.target.value);\n            }}/>\n          </p>\n          </div>\n          <datalist id=\"time-list\">\n          <option value=\"10:00\"></option>\n          <option value=\"11:00\"></option>\n          <option value=\"12:00\"></option>\n          <option value=\"13:00\"></option>\n          <option value=\"14:00\"></option>\n          <option value=\"15:00\"></option>\n          <option value=\"16:00\"></option>\n          <option value=\"17:00\"></option>\n          </datalist>\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>С собой</h3>\n          <Checkbox checked={selfService} onToggle={() => setSelfService(selfService)} />\n        </div>\n        <div className=\"Place__choice-item\">\n          <h3>На месте</h3>\n          <Checkbox checked={!selfService} onToggle={() => setSelfService(!setSelfService)} />\n        </div>\n      </div>\n      <footer className=\"Place__footer\">\n        <Link to={`/order/${area.id}/${item.id}`} className=\"Place__order\">\n          Оплатить {price}\n        </Link>\n      </footer>\n    </div>\n    );\n}\n\n};\n\nexport default withRouter(Basket);\n"]},"metadata":{},"sourceType":"module"}